{
  "comments": [
    {
      "key": {
        "uuid": "c59d7a71_516174b9",
        "filename": "vp10/decoder/decodeframe.c",
        "patchSetId": 1
      },
      "lineNbr": 2110,
      "author": {
        "id": 1002037
      },
      "writtenOn": "2015-12-15T03:08:53Z",
      "side": 1,
      "message": "sorry, obvious bug, not sure why I didn\u0027t notice in my testing (I did enable aq-mode\u003d1)...",
      "revId": "b8a028be0459b6d1579a948df43c9d61f4581c4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "853d42f0_8211fc9e",
        "filename": "vp10/encoder/bitstream.c",
        "patchSetId": 1
      },
      "lineNbr": 1263,
      "author": {
        "id": 1002037
      },
      "writtenOn": "2015-12-15T03:07:56Z",
      "side": 1,
      "message": "So, the idea here was that lossless is a per-segment thing. The problem right now is that segid0 could be lossless, but segid1 isn\u0027t, and then we\u0027d still force tx4x4 on all segments...",
      "range": {
        "startLine": 1263,
        "startChar": 10,
        "endLine": 1263,
        "endChar": 18
      },
      "revId": "b8a028be0459b6d1579a948df43c9d61f4581c4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45db4a39_72257e9e",
        "filename": "vp10/encoder/bitstream.c",
        "patchSetId": 1
      },
      "lineNbr": 1263,
      "author": {
        "id": 1000893
      },
      "writtenOn": "2015-12-15T04:52:21Z",
      "side": 1,
      "message": "You are correct. I did this because at this point the tx_mode is set based on lossless[0] in select_txfm_mode() in encoder, making this one to be consistent with select_txfm_mode(), so encoding and bitstream packing is consistent.",
      "parentUuid": "853d42f0_8211fc9e",
      "range": {
        "startLine": 1263,
        "startChar": 10,
        "endLine": 1263,
        "endChar": 18
      },
      "revId": "b8a028be0459b6d1579a948df43c9d61f4581c4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "05b1520d_fb20afe2",
        "filename": "vp10/encoder/bitstream.c",
        "patchSetId": 1
      },
      "lineNbr": 1263,
      "author": {
        "id": 1002037
      },
      "writtenOn": "2015-12-15T12:36:51Z",
      "side": 1,
      "message": "I can look at this if you want. I\u0027d prefer to fix this correctly, ideally we make the frame-wide txmode selection independent of losslessness (except if segmentation is disabled), and enforce tx4x4-only-for-lossless on a per-block basis depending on its segment ID and whether that segment is losslessly coded. What options do you use to reproduce the mismatch during encoding? I\u0027ll try --aq-mode\u003d1 but it didn\u0027t give me mismatches before...",
      "parentUuid": "45db4a39_72257e9e",
      "range": {
        "startLine": 1263,
        "startChar": 10,
        "endLine": 1263,
        "endChar": 18
      },
      "revId": "b8a028be0459b6d1579a948df43c9d61f4581c4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "45898a39_30c5c68c",
        "filename": "vp10/encoder/rdopt.c",
        "patchSetId": 1
      },
      "lineNbr": 728,
      "author": {
        "id": 1002037
      },
      "writtenOn": "2015-12-15T03:07:56Z",
      "side": 1,
      "message": "Are you sure that\u0027s right? I thought in all segmentation modes (refresh, complexity, aq), segid was selected before the actual r/d loop and this would work...",
      "range": {
        "startLine": 728,
        "startChar": 31,
        "endLine": 728,
        "endChar": 39
      },
      "revId": "b8a028be0459b6d1579a948df43c9d61f4581c4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "25ead6c4_2ba62586",
        "filename": "vp10/encoder/rdopt.c",
        "patchSetId": 1
      },
      "lineNbr": 728,
      "author": {
        "id": 1000893
      },
      "writtenOn": "2015-12-15T04:52:21Z",
      "side": 1,
      "message": "same here, because in select_tx_mode() called by encode_frame_internal, the tx_mode for the frame is set by lossless[0], this is to make them consistent.",
      "parentUuid": "45898a39_30c5c68c",
      "range": {
        "startLine": 728,
        "startChar": 31,
        "endLine": 728,
        "endChar": 39
      },
      "revId": "b8a028be0459b6d1579a948df43c9d61f4581c4a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}
{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b69d8784_62a44faf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1440326
      },
      "writtenOn": "2021-12-01T10:57:58Z",
      "side": 1,
      "message": "Ping reviewers",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a9485988_e248facb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1440326
      },
      "writtenOn": "2021-12-02T00:10:33Z",
      "side": 1,
      "message": "Finished more test before review.",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5322ac82_aa4fe9fa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1440326
      },
      "writtenOn": "2021-12-06T08:19:52Z",
      "side": 1,
      "message": "Ping reviewers.",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8ad1397_157f7976",
        "filename": "vp9/encoder/vp9_bitstream.c",
        "patchSetId": 2
      },
      "lineNbr": 1252,
      "author": {
        "id": 1126910
      },
      "writtenOn": "2021-12-07T05:45:34Z",
      "side": 1,
      "message": "We only added reset_fb_idx for the fixed SVC mode. But for the flexible/bypass SVC mode, where the fb_idx is set by user via vpx_svc_ref_frame_config_t, preference was not to change the map_idx internally from what user may set. I agree to make this change as is for fixed SVC and non-svc mode. Should it be excluded for flexible SVC mode?",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "554ec708_d030d720",
        "filename": "vp9/encoder/vp9_bitstream.c",
        "patchSetId": 2
      },
      "lineNbr": 1252,
      "author": {
        "id": 1440326
      },
      "writtenOn": "2021-12-07T06:05:39Z",
      "side": 1,
      "message": "Thank for patient review.\n\nThis CL does not change any user preference. Actually the issue was initially reported in WebRTC usage. webrtc-vp9 encoder set ref_frame_config only reference on LAST, no reference on GOLDEN/ALTREF. But uncompressed header in produced bitstream set both GOLDEN/ALTREF to key frame. This CL respects user reference configuration through `ctrl_set_svc_ref_frame_config`.\n\nFurther more, We can trust `cpi-\u003eref_frame_flags` to get which frames are actually used as references.",
      "parentUuid": "b8ad1397_157f7976",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7e45e69_584017ac",
        "filename": "vp9/encoder/vp9_bitstream.c",
        "patchSetId": 2
      },
      "lineNbr": 1252,
      "author": {
        "id": 1126910
      },
      "writtenOn": "2021-12-07T06:13:39Z",
      "side": 1,
      "message": "But in the set_ref_frame_config the user should also set the fb_idx for each reference. What did they (webrtc) set the fb_idx for the golden/altref references?",
      "parentUuid": "554ec708_d030d720",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a4a9c37_22e0b19a",
        "filename": "vp9/encoder/vp9_bitstream.c",
        "patchSetId": 2
      },
      "lineNbr": 1252,
      "author": {
        "id": 1440326
      },
      "writtenOn": "2021-12-07T06:26:10Z",
      "side": 1,
      "message": "reference_golden/reference_altref are set to 0, it means not use them as reference.\n```\ncpi-\u003esvc.reference_golden[sl] \u003d data-\u003ereference_golden[sl];\ncpi-\u003esvc.reference_altref[sl] \u003d data-\u003ereference_altref[sl];\n```\n\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/modules/video_coding/codecs/vp9/libvpx_vp9_encoder.cc;l\u003d154;drc\u003d58b0f88e7fedf85501d3fd605e69928965571387;bpv\u003d1;bpt\u003d1",
      "parentUuid": "b7e45e69_584017ac",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11aca65d_8d01ead0",
        "filename": "vp9/encoder/vp9_bitstream.c",
        "patchSetId": 2
      },
      "lineNbr": 1256,
      "author": {
        "id": 1126910
      },
      "writtenOn": "2021-12-06T18:52:06Z",
      "side": 1,
      "message": "should replace \"reference ?\" with \"reference or is_refreshed ?\", as in reset_fb_idx_unused()",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd970411_4a23eff5",
        "filename": "vp9/encoder/vp9_bitstream.c",
        "patchSetId": 2
      },
      "lineNbr": 1256,
      "author": {
        "id": 1440326
      },
      "writtenOn": "2021-12-07T05:04:52Z",
      "side": 1,
      "message": "If I understand correct, we need not to check `is_refreshed`. It tells decoder which previous decoded frames are used as current reference.\n\nThe `refresh_frame_flags` is controlled by below:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/libvpx/source/libvpx/vp9/encoder/vp9_bitstream.c;drc\u003d2d9e4d3c7a07aa50dc5e12c59d190f28b9e1bcb7;l\u003d1245",
      "parentUuid": "11aca65d_8d01ead0",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bcb1688f_8b00a64b",
        "filename": "vp9/encoder/vp9_bitstream.c",
        "patchSetId": 2
      },
      "lineNbr": 1256,
      "author": {
        "id": 1126910
      },
      "writtenOn": "2021-12-07T05:45:34Z",
      "side": 1,
      "message": "Ok, acknowledged",
      "parentUuid": "dd970411_4a23eff5",
      "revId": "bfda2eae023392397eff8f20463da2ed8d08f4f2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}
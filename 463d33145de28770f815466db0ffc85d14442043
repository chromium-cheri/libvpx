{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4f5bf28b_7f14a64e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000899
      },
      "writtenOn": "2021-06-10T13:28:32Z",
      "side": 1,
      "message": "LGTM too thanks.",
      "revId": "463d33145de28770f815466db0ffc85d14442043",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fabed6a_3f4efd67",
        "filename": "vp9/encoder/vp9_firstpass.c",
        "patchSetId": 3
      },
      "lineNbr": 3496,
      "author": {
        "id": 1132564
      },
      "writtenOn": "2021-06-08T23:30:23Z",
      "side": 1,
      "message": "Will use_vizier_rc_params \u003d\u003d 0 when simple_encode call this function?\nFor example, \"twopass-\u003eactive_wq_factor *\u003d AV_WQ_FACTOR;\"\nseems assuming that twopass is already initialized.\n\nRight now in simple_encode, we are declare twopass (without other init func) and then call vp9_init_vizier_params(), i.e. \n\nTWO_PASS twopass;\nvp9_init_vizier_params();\n\nIf we are using only the logics in \"use_vizier_rc_params \u003d\u003d 0\", I would recommend to write a separate sub-function for that part.\n\nSorry, I am giving out a lot of comments.\nBut I think it\u0027s important to clarify things out.\n\nThanks for fixing this issue.",
      "range": {
        "startLine": 3495,
        "startChar": 0,
        "endLine": 3496,
        "endChar": 46
      },
      "revId": "463d33145de28770f815466db0ffc85d14442043",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4a68944a_dd566021",
        "filename": "vp9/encoder/vp9_firstpass.c",
        "patchSetId": 3
      },
      "lineNbr": 3496,
      "author": {
        "id": 1129564
      },
      "writtenOn": "2021-06-09T05:29:59Z",
      "side": 1,
      "message": "First, when simple_encode is used, twopass-\u003euse_vizier_rc_params is always 0.\nIt is set from the command line option.\n\nSecond, rc parameters in twopass are initialized to 1.0 or read from command line.\n\nNow there\u0027re three use cases.\n(1). for normal libvpx two pass encoding, twopass-\u003euse_vizier_rc_params is 0.\n\"twopass-\u003eactive_wq_factor \u003d AV_WQ_FACTOR;\"\n\n(2). for the vizier experiment, which is also two pass encoding, twopass-\u003euse_vizier_rc_params is 0.\n\"twopass-\u003eactive_wq_factor *\u003d AV_WQ_FACTOR;\"\nAnd in this case the vizier experiment sets twopass-\u003eactive_wq_factor to values in [0.8, 1.2].\n\n(3). for simple encode, twopass-\u003euse_vizier_rc_params is 0.\n\"twopass-\u003eactive_wq_factor \u003d AV_WQ_FACTOR;\"\n\nComment: \"If we are using only the logics in \"use_vizier_rc_params \u003d\u003d 0\", I would recommend to write a separate sub-function for that part.\"\n\nMy thought:\nBoth the default libvpx twopass coding and simple_encode goes through \"use_vizier_rc_params \u003d\u003d 0\". I think keeping it as a single function makes more sense. If there are new changes to these RC parameters (likely), and the initialization for simple_encode is in a separate function, the behavior could differ if one forgets to update RC parameters for simple_encode (also very likely).",
      "parentUuid": "3fabed6a_3f4efd67",
      "range": {
        "startLine": 3495,
        "startChar": 0,
        "endLine": 3496,
        "endChar": 46
      },
      "revId": "463d33145de28770f815466db0ffc85d14442043",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}
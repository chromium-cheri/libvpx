{
  "comments": [
    {
      "key": {
        "uuid": "ef7ee5da_caa274d4",
        "filename": "vpx/src/vpx_image.c",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2017-09-28T05:42:17Z",
      "side": 1,
      "message": "this calculation actually has nothing to do with the buf_align, that will only affect the local allocation. really these shouldn\u0027t be adjusted if no allocation is going to be done. it could actually be moved after the !img check given where it\u0027s referenced",
      "revId": "d35e3d78aaeb805054856f7a976662b4977b1ce1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a836fb2_4e7a80f5",
        "filename": "vpx/src/vpx_image.c",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1171444
      },
      "writtenOn": "2017-09-28T18:30:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef7ee5da_caa274d4",
      "revId": "d35e3d78aaeb805054856f7a976662b4977b1ce1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e27c060_ef3bffc1",
        "filename": "vpx/src/vpx_image.c",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2017-09-28T05:42:17Z",
      "side": 1,
      "message": "this will be wrong without the rounding in the odd width case. maybe the test cases should include an encode/decode cycle with a psnr check to make sure this is working as intended",
      "revId": "d35e3d78aaeb805054856f7a976662b4977b1ce1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "acfbef63_91e2fc62",
        "filename": "vpx/src/vpx_image.c",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1171444
      },
      "writtenOn": "2017-09-28T18:30:14Z",
      "side": 1,
      "message": "I\u0027m not very clear how chroma subsampling is defined when the width is set as an odd number.\n\nSo we should round it up when it\u0027s odd here?\n\nThe test thing can be done in another change.",
      "parentUuid": "2e27c060_ef3bffc1",
      "revId": "d35e3d78aaeb805054856f7a976662b4977b1ce1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0584a69a_50f06b49",
        "filename": "vpx/src/vpx_image.c",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2017-09-28T19:59:14Z",
      "side": 1,
      "message": "\u003e I\u0027m not very clear how chroma subsampling is defined when the width is set as an odd number.\n\u003e \n\u003e So we should round it up when it\u0027s odd here?\n\u003e \n\nyes, it should be (w/h + 1) / 2\n\n\u003e The test thing can be done in another change.\n\nyou can follow up with one, but I think this slight difference is a good example to try to use to see if the test will fail with it. there may be other cases that assume an even stride elsewhere in this code base.",
      "parentUuid": "acfbef63_91e2fc62",
      "revId": "d35e3d78aaeb805054856f7a976662b4977b1ce1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89afff76_2055164a",
        "filename": "vpx/src/vpx_image.c",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1171444
      },
      "writtenOn": "2017-09-28T22:58:06Z",
      "side": 1,
      "message": "\u003e \u003e I\u0027m not very clear how chroma subsampling is defined when the width is set as an odd number.\n\u003e \u003e \n\u003e \u003e So we should round it up when it\u0027s odd here?\n\u003e \u003e \n\u003e \n\u003e yes, it should be (w/h + 1) / 2\n\nThe size of the buffer allocated is (w*h*3/2) and Y channel uses (w*h), so U and V will use (w*h/2). If we round it up here, the U and V will exceed the size.\n\nI tried changing it to \"(stride_in_bytes + 1) \u003e\u003e xcs\" and then the newly added test would fail.\n\n\u003e \n\u003e \u003e The test thing can be done in another change.\n\u003e \n\u003e you can follow up with one, but I think this slight difference is a good example to try to use to see if the test will fail with it. there may be other cases that assume an even stride elsewhere in this code base.",
      "parentUuid": "0584a69a_50f06b49",
      "revId": "d35e3d78aaeb805054856f7a976662b4977b1ce1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "614be94e_59068473",
        "filename": "vpx/src/vpx_image.c",
        "patchSetId": 2
      },
      "lineNbr": 142,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2017-09-28T23:19:52Z",
      "side": 1,
      "message": "\u003e \u003e \u003e I\u0027m not very clear how chroma subsampling is defined when the width is set as an odd number.\n\u003e \u003e \u003e \n\u003e \u003e \u003e So we should round it up when it\u0027s odd here?\n\u003e \u003e \u003e \n\u003e \u003e \n\u003e \u003e yes, it should be (w/h + 1) / 2\n\u003e \n\u003e The size of the buffer allocated is (w*h*3/2) and Y channel uses (w*h), so U and V will use (w*h/2). If we round it up here, the U and V will exceed the size.\n\u003e \n\u003e I tried changing it to \"(stride_in_bytes + 1) \u003e\u003e xcs\" and then the newly added test would fail.\n\u003e \n\nmy mistake, I was thinking of overall size not the stride. it be good to check that this passes the original poc test too. I think that was artificial and not from a real source so any chances of corruption should be low.\n\n\u003e \u003e \n\u003e \u003e \u003e The test thing can be done in another change.\n\u003e \u003e \n\u003e \u003e you can follow up with one, but I think this slight difference is a good example to try to use to see if the test will fail with it. there may be other cases that assume an even stride elsewhere in this code base.",
      "parentUuid": "89afff76_2055164a",
      "revId": "d35e3d78aaeb805054856f7a976662b4977b1ce1",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}
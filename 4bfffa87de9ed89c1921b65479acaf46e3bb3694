{
  "comments": [
    {
      "key": {
        "uuid": "AAAAdn//mCo\u003d",
        "filename": "vp9/encoder/vp9_aq_complexity.c",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 1000963
      },
      "writtenOn": "2014-06-12T23:08:27Z",
      "side": 1,
      "message": "should these be in a structure?",
      "revId": "4bfffa87de9ed89c1921b65479acaf46e3bb3694",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAdn//l+0\u003d",
        "filename": "vp9/encoder/vp9_aq_complexity.c",
        "patchSetId": 6
      },
      "lineNbr": 20,
      "author": {
        "id": 1000899
      },
      "writtenOn": "2014-06-13T10:59:19Z",
      "side": 1,
      "message": "They could be yes.",
      "parentUuid": "AAAAdn//mCo\u003d",
      "revId": "4bfffa87de9ed89c1921b65479acaf46e3bb3694",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAdn//mGQ\u003d",
        "filename": "vp9/encoder/vp9_aq_complexity.c",
        "patchSetId": 6
      },
      "lineNbr": 92,
      "author": {
        "id": 1000963
      },
      "writtenOn": "2014-06-12T23:08:27Z",
      "side": 1,
      "message": "formatting ( spaces wrong)",
      "revId": "4bfffa87de9ed89c1921b65479acaf46e3bb3694",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAdn//mCs\u003d",
        "filename": "vp9/encoder/vp9_aq_complexity.c",
        "patchSetId": 6
      },
      "lineNbr": 116,
      "author": {
        "id": 1000963
      },
      "writtenOn": "2014-06-12T23:08:27Z",
      "side": 1,
      "message": "I do not understand what this is trying to do. \nmaybe more comments would help   : \n\nUsing the numbers from the table we\u0027ll have if \n\nprojected \u003c 1/4 target then break  \nprojected \u003c 1/2 target  then break \nprojected \u003c target    then break \n\nIf projected is at 1/4 the target rate we\u0027ll use all 3 active segements?",
      "revId": "4bfffa87de9ed89c1921b65479acaf46e3bb3694",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAdn//l+w\u003d",
        "filename": "vp9/encoder/vp9_aq_complexity.c",
        "patchSetId": 6
      },
      "lineNbr": 116,
      "author": {
        "id": 1000899
      },
      "writtenOn": "2014-06-13T10:59:19Z",
      "side": 1,
      "message": "No. At this point there may be 1, 2 or 3 segments.\n\nAQ strength defines how many segments are in use and the transition points.\n\nThe code then checks the projected rate vs target ratio against transition points for the active number of segments (1,2 or 3)\n\nIf strength 0 then we only have one segment (segment 0): We never enter the while loop as segment starts at 0.\n\nIf strength is 1 then there are two active segments. The loop starts at 1 and sets segment 1 iff projected rate \u003c 1/4 else segment 0.\n\nIf strength is 2 then 3 segments are active at \u003c 1/4 (segment 2) \u003c 1/2 segment 1 and \u003e\u003d 1/2 segment 0.\n\nThis mechanism allows testing multiple strengths and numbers of segments with different transition points easily just by changing the numbers in the table.\n\nHowever, at the moment this loop would not work for Q boosts at projected rates \u003e 1.0X target as noted.",
      "parentUuid": "AAAAdn//mCs\u003d",
      "revId": "4bfffa87de9ed89c1921b65479acaf46e3bb3694",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAdn//l+M\u003d",
        "filename": "vp9/encoder/vp9_aq_complexity.c",
        "patchSetId": 6
      },
      "lineNbr": 116,
      "author": {
        "id": 1000963
      },
      "writtenOn": "2014-06-13T14:18:05Z",
      "side": 1,
      "message": "Why not explain this in a comment? Granted I decided to do code reviews late yesterday and as previously noted I become more and more of an idiot as the day progresses and that may have been part of  the problem. \n\nLet me see if I have it right:\n\nThis code determines which segment to put the block in based on the ratio of the number of bits we think it will be using the current quantizer ( projected_rate ) divided by the average number of bits we should use for blocks of this size ( target _rate).   The aq_c_transitions hold the position at which we switch between each segment.   This while loop goes through each of the transitions to determine which segment this block belongs to by comparing the projected rate to the target * the value in aq_c_transitions..\n\nThe aq_strength determines how many segments are supported and thus which set of transitions to use.",
      "parentUuid": "AAAAdn//l+w\u003d",
      "revId": "4bfffa87de9ed89c1921b65479acaf46e3bb3694",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}
/*  vim:filetype=c
 *
 *  Copyright (c) 2016 The WebM project authors. All Rights Reserved.
 *
 *  Use of this source code is governed  by a BSD-style license that can be
 *  found in the LICENSE file in the root of the source tree. An additional
 *  intellectual property  rights grant can  be found in the  file PATENTS.
 *  All contributing  project authors may be  found in the AUTHORS  file in
 *  the root of the source tree.
 */

#ifdef MATX_SUFFIX

#include "string.h"
#include "stdio.h"
#include "assert.h"

#include "vp9/common/vp9_matx_enums.h"
#include "vp9/common/vp9_matx.h"

void MATX_DEFINE_FUNC(zerofill)(struct T_MATX_STRUCT *const image) {
  int nbytes = image->rows * image->stride * sizeof(T_MATX_ELEMTYPE);
  memset(image->data, 0, nbytes);
}

void MATX_DEFINE_FUNC(copy_to)(const struct T_MATX_STRUCT *const src,
                               struct T_MATX_STRUCT *const dst) {
  int i;

  if (dst->data == src->data)  //
    return;

  MATX_APPLY_FUNC(affirm)(dst, src->rows, src->cols, src->stride, src->cn);

  for (i = 0; i < src->rows; ++i) {
    const T_MATX_ELEMTYPE *copy_from = src->data + i * src->stride;
    T_MATX_ELEMTYPE *copy_to = dst->data + i * dst->stride;

    memcpy(copy_to, copy_from, src->cols * sizeof(T_MATX_ELEMTYPE));
  }
}

#undef MATX_SUFFIX
#endif

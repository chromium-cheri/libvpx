{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7f1c99d3_5f7411d6",
        "filename": "test/vp9_c_vs_simd_encode.sh",
        "patchSetId": 3
      },
      "lineNbr": 91,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2023-09-22T18:45:27Z",
      "side": 1,
      "message": "this will override the version in tools_common.sh, it does the same cleanup:\n\n```\ncleanup() {\n  if [ -n \"${VPX_TOOL_TEST}\" ] \u0026\u0026 [ \"${VPX_TOOL_TEST}\" !\u003d \u0027\u003cunset\u003e\u0027 ]; then\n    echo \"FAIL: $VPX_TOOL_TEST\"\n  fi\n  if [ -n \"${VPX_TEST_OUTPUT_DIR}\" ] \u0026\u0026 [ -d \"${VPX_TEST_OUTPUT_DIR}\" ]; then\n    rm -rf \"${VPX_TEST_OUTPUT_DIR}\" \n  fi\n}\n```",
      "revId": "79e269037a8711a7e36759b9e45e710299b4ea1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25476477_a6d2b37f",
        "filename": "test/vp9_c_vs_simd_encode.sh",
        "patchSetId": 3
      },
      "lineNbr": 241,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2023-09-22T18:45:27Z",
      "side": 1,
      "message": "this should be \u0027if ! diff ...` if you want it to output the error. I saw a failure with x86/avx2 in my run and only diagnosed the current state with `bash -x`.",
      "revId": "79e269037a8711a7e36759b9e45e710299b4ea1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f583659_a92653e8",
        "filename": "test/vp9_c_vs_simd_encode.sh",
        "patchSetId": 3
      },
      "lineNbr": 241,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2023-09-22T19:00:35Z",
      "side": 1,
      "message": "\u003e this should be \u0027if ! diff ...` if you want it to output the error. I saw a failure with x86/avx2 in my run and only diagnosed the current state with `bash -x`.\n\nthis can also be `diff -q` instead of outputting to `/dev/null`.",
      "parentUuid": "25476477_a6d2b37f",
      "revId": "79e269037a8711a7e36759b9e45e710299b4ea1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bafa437c_e04fada9",
        "filename": "test/vp9_c_vs_simd_encode.sh",
        "patchSetId": 3
      },
      "lineNbr": 241,
      "author": {
        "id": 1000884
      },
      "writtenOn": "2023-09-22T19:03:47Z",
      "side": 1,
      "message": "Are you saying when the results are different, line 243- 246 won\u0027t be executed? If a difference is seen, could you explain what happens with \"set -e\"?\nOtherwise, the current code is easy to follow IMO.",
      "parentUuid": "25476477_a6d2b37f",
      "revId": "79e269037a8711a7e36759b9e45e710299b4ea1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c748b8d_949a34ea",
        "filename": "test/vp9_c_vs_simd_encode.sh",
        "patchSetId": 3
      },
      "lineNbr": 241,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2023-09-22T19:38:50Z",
      "side": 1,
      "message": "\u003e Are you saying when the results are different, line 243- 246 won\u0027t be executed? If a difference is seen, could you explain what happens with \"set -e\"?\n\u003e Otherwise, the current code is easy to follow IMO.\n\n`set -e` causes any \u0027simple\u0027 command that fails to exit immediately. Making it a compound command, like adding `|| false` or putting the call into the if statement, avoids this.\n\n```\n$ help set\n...\n      -e  Exit immediately if a command exits with a non-zero status.\n```\n\nFrom my local run, which failed for x86 + AVX2 the sequence of commands was:\n\n```\n++ diff /tmp/vpx_test_1981176/Out-generic-gnu-yuv_raw_input-good-1600kbps-cpu0.ivf /tmp/vpx_test_1981176/Out-x86-linux-gcc-yuv_raw_input-good-1600kbps-cpu0.ivf\n+ cleanup\n+ rm -rf /tmp/vpx_test_1981176\n```",
      "parentUuid": "bafa437c_e04fada9",
      "revId": "79e269037a8711a7e36759b9e45e710299b4ea1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77b94263_b123b430",
        "filename": "test/vp9_c_vs_simd_encode.sh",
        "patchSetId": 3
      },
      "lineNbr": 241,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2023-09-22T20:56:43Z",
      "side": 1,
      "message": "\u003e \u003e Are you saying when the results are different, line 243- 246 won\u0027t be executed? If a difference is seen, could you explain what happens with \"set -e\"?\n\u003e \u003e Otherwise, the current code is easy to follow IMO.\n\u003e \n\u003e `set -e` causes any \u0027simple\u0027 command that fails to exit immediately. Making it a compound command, like adding `|| false` or putting the call into the if statement, avoids this.\n\u003e \n\u003e ```\n\u003e $ help set\n\u003e ...\n\u003e       -e  Exit immediately if a command exits with a non-zero status.\n\u003e ```\n\u003e \n\u003e From my local run, which failed for x86 + AVX2 the sequence of commands was:\n\u003e \n\u003e ```\n\u003e ++ diff /tmp/vpx_test_1981176/Out-generic-gnu-yuv_raw_input-good-1600kbps-cpu0.ivf /tmp/vpx_test_1981176/Out-x86-linux-gcc-yuv_raw_input-good-1600kbps-cpu0.ivf\n\u003e + cleanup\n\u003e + rm -rf /tmp/vpx_test_1981176\n\u003e ```\n\nThis means any code like `if [ $? ...` should be updated to avoid the script from exiting early. The current behavior seems to be that all targets will be tested even if one fails.",
      "parentUuid": "4c748b8d_949a34ea",
      "revId": "79e269037a8711a7e36759b9e45e710299b4ea1c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}
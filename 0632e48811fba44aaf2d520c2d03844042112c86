{
  "comments": [
    {
      "key": {
        "uuid": "7bd1bb2e_c3129d02",
        "filename": "vp8/decoder/threading.c",
        "patchSetId": 6
      },
      "lineNbr": 257,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "I added VPX_ATOMIC_INIT macros to be able to initialize this to const.",
      "range": {
        "startLine": 257,
        "startChar": 17,
        "endLine": 257,
        "endChar": 40
      },
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bed2a767_cb1b8f81",
        "filename": "vp8/decoder/threading.c",
        "patchSetId": 6
      },
      "lineNbr": 366,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "This name was very confusing to me. It looks like it just does a single read and \"sync\" part implies some memory ordering (like __sync_* compiler builtins). But it does a very different thing -- it loops waiting for a condition. I think its name should include \"wait\" somehow.",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "790cfbac_88db27f3",
        "filename": "vp8/decoder/threading.c",
        "patchSetId": 6
      },
      "lineNbr": 366,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done, replaced with vp8_atomic_spin_wait.",
      "parentUuid": "bed2a767_cb1b8f81",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5457aef4_7c443918",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "This is unnecessary.",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "314f9de0_48ae2412",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done, (replaced usage with #if defined instead).",
      "parentUuid": "5457aef4_7c443918",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3ec07a7_33c2c48d",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-29T07:34:47Z",
      "side": 1,
      "message": "It should work with #if\u0027s as well. An undefined macro evaluates to 0 in #if context.",
      "parentUuid": "314f9de0_48ae2412",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8322a585_f35a0070",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-29T15:41:51Z",
      "side": 1,
      "message": "libvpx builds with -Wundef which triggers a warning.",
      "parentUuid": "f3ec07a7_33c2c48d",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5b3ed32c_57f758a1",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 40,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "This is unnecessary.",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "550eb7ea_7d6bf14e",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 40,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5b3ed32c_57f758a1",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e36c758_57898063",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 60,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "s/: : :/:::/ as in other defines",
      "range": {
        "startLine": 60,
        "startChar": 65,
        "endLine": 60,
        "endChar": 70
      },
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9f88681_8cfff618",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 60,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e36c758_57898063",
      "range": {
        "startLine": 60,
        "startChar": 65,
        "endLine": 60,
        "endChar": 70
      },
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "08ee482e_8d3780ba",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 69,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "I would phrase this more strongly. They must not be used other than by means of the provided functions. Reading/writing the int value will work, but then it will break with atomic_int anyway.",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "516fcf8d_3a1d8010",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 69,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "08ee482e_8d3780ba",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "307cd4e2_a96d651e",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 73,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "Drop volatile.\natomic_int does provide everything required for safe multithreaded accesses. It must not be always paired with volatile.",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3ef1b99f_b2cc8636",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 73,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done, confused by volatile pointers in stdatomic headers.",
      "parentUuid": "307cd4e2_a96d651e",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77e5069e_73bb59a2",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 73,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-29T07:34:47Z",
      "side": 1,
      "message": "These volatiles in function signatures mean that the functions _support_ volatile variables as well.",
      "parentUuid": "3ef1b99f_b2cc8636",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "91caf6aa_124746a3",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 73,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-29T15:41:51Z",
      "side": 1,
      "message": "Thanks!",
      "parentUuid": "77e5069e_73bb59a2",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e41c293_43c463f8",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "I would stick with the standard C/C++ naming as much as possible. The standard name for this operation is _store_, not write.\nAlso I would add the implied memory ordering of the operation. Reader of the code that uses this function may this it either provides relaxed memory ordering (as nothing is specified), or sequentially consistent ordering (as this is the default in C/C++). No chance of guessing that this is release operation:\nvoid vpx_atomic_store_release(vpx_atomic_int *atomic, int value);\nEliminates the need for the comment.",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d3b8330_688b88fb",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 89,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4e41c293_43c463f8",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "549747d6_ddaa78fc",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 100,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "I would do the cast here rather than remove const\u0027s throughout the code base and sprinkle TODO\u0027s and comments explaining why something that should be const is not declared const.\nThis looks more like a defect with C atomics, both atomic builtins and C++ accept consts. So it looks more reasonable to fix it locally rather than make it has systematic effect on the whole code base.",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7755f210_56c8cb93",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 100,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done\n\nThis got ugly to beat -Wcast-qual though. :)",
      "parentUuid": "549747d6_ddaa78fc",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77592deb_dd5f4201",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 105,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "Similarly here:\nint vpx_atomic_load_acquire(vpx_atomic_int *atomic);",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c99650d3_4d9697ba",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 105,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77592deb_dd5f4201",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "553c4af0_fde6d922",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1121979
      },
      "writtenOn": "2017-08-28T09:34:14Z",
      "side": 1,
      "message": "You unconditionally undef VPX_USE_ATOMIC_BUILTINS which may not be defined, so you can drop\n#if defined(vpx_atomics_memory_barrier)\nhere as well.",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cef1ba4_faf2a947",
        "filename": "vpx_util/vpx_atomics.h",
        "patchSetId": 6
      },
      "lineNbr": 120,
      "author": {
        "id": 1126912
      },
      "writtenOn": "2017-08-28T22:09:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "553c4af0_fde6d922",
      "revId": "0632e48811fba44aaf2d520c2d03844042112c86",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}
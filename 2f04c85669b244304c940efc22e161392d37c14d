{
  "comments": [
    {
      "key": {
        "uuid": "5a142433_02d93055",
        "filename": "vp10/common/reconinter.c",
        "patchSetId": 3
      },
      "lineNbr": 1041,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T14:44:41Z",
      "side": 1,
      "message": "these mask values are based on the MASK_BITS value that is buried (several times!) deep inside the vpx_dsp/ implementation.\nThis is a liability. There should be a common definition somewhere in some .h",
      "range": {
        "startLine": 1041,
        "startChar": 13,
        "endLine": 1041,
        "endChar": 20
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a2e9c8f_abb0099d",
        "filename": "vp10/common/reconinter.c",
        "patchSetId": 3
      },
      "lineNbr": 1041,
      "author": {
        "id": 1137274
      },
      "writtenOn": "2016-07-08T15:10:34Z",
      "side": 1,
      "message": "Agreed. Somebody needs to go and fix this large scale in the whole codebase. \n\nHowever, I did not write the original, and fixing this needs to be a separate patch, it has nothing to do with the optimizations in this patch.",
      "parentUuid": "5a142433_02d93055",
      "range": {
        "startLine": 1041,
        "startChar": 13,
        "endLine": 1041,
        "endChar": 20
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_88e67f50",
        "filename": "vp10/common/reconinter.c",
        "patchSetId": 3
      },
      "lineNbr": 1041,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T19:40:56Z",
      "side": 1,
      "message": "this clean-up should precede, otherwise the debt is growing with each new copy-paste",
      "parentUuid": "9a2e9c8f_abb0099d",
      "range": {
        "startLine": 1041,
        "startChar": 13,
        "endLine": 1041,
        "endChar": 20
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a2e9c8f_4b708589",
        "filename": "vp10/common/reconinter.c",
        "patchSetId": 3
      },
      "lineNbr": 1041,
      "author": {
        "id": 1137274
      },
      "writtenOn": "2016-07-08T19:59:37Z",
      "side": 1,
      "message": "You discuss this with Debargha, I\u0027m just the deck hand who was asked to make it faster so I made it faster.",
      "parentUuid": "5a142433_88e67f50",
      "range": {
        "startLine": 1041,
        "startChar": 13,
        "endLine": 1041,
        "endChar": 20
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_7385601f",
        "filename": "vp10/common/reconinter.c",
        "patchSetId": 3
      },
      "lineNbr": 1041,
      "author": {
        "id": 1001184
      },
      "writtenOn": "2016-07-08T20:34:27Z",
      "side": 1,
      "message": "https://chromium-review.googlesource.com/#/c/359339/",
      "parentUuid": "9a2e9c8f_4b708589",
      "range": {
        "startLine": 1041,
        "startChar": 13,
        "endLine": 1041,
        "endChar": 20
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_e2d51c1b",
        "filename": "vpx_dsp/blend_hmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T14:44:41Z",
      "side": 1,
      "message": "see other comment",
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a2e9c8f_8bad4d47",
        "filename": "vpx_dsp/blend_hmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1137274
      },
      "writtenOn": "2016-07-08T15:10:34Z",
      "side": 1,
      "message": "Not really. These functions use 6 bit masks. You could have a blend_mask8 to use masks from [0, 256], which the interintra predictors use for example. I could call MASK_BITS whatever other name.",
      "parentUuid": "5a142433_e2d51c1b",
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_4842a700",
        "filename": "vpx_dsp/blend_hmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 19,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T19:40:56Z",
      "side": 1,
      "message": "it\u0027s not obvious. I\u0027d use \u00276b\u0027 or \u00276bit\u0027 in the function\u0027s name then.\n\nand yet, MASK_BITS is shared by all implementations, so a common definition would be needed. It\u0027s not like you have choice over its value here.\n\nIsn\u0027t there a .h where this one could go?\n\nformat_constants.h would be a self-documented name, if i had to pick one...",
      "parentUuid": "9a2e9c8f_8bad4d47",
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_e8d61b5e",
        "filename": "vpx_dsp/blend_hmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T19:40:56Z",
      "side": 1,
      "message": "should be uint32_t instead of \u0027int\u0027, i\u0027d say (and below too).",
      "range": {
        "startLine": 37,
        "startChar": 12,
        "endLine": 37,
        "endChar": 15
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_c2d21831",
        "filename": "vpx_dsp/blend_vmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T14:44:41Z",
      "side": 1,
      "message": "consts uint16_t* ...",
      "range": {
        "startLine": 53,
        "startChar": 2,
        "endLine": 53,
        "endChar": 10
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a2e9c8f_0b7b9da4",
        "filename": "vpx_dsp/blend_vmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1137274
      },
      "writtenOn": "2016-07-08T15:10:34Z",
      "side": 1,
      "message": "src0 or src1 might alias dst. Are you sure this would be safe const?",
      "parentUuid": "5a142433_c2d21831",
      "range": {
        "startLine": 53,
        "startChar": 2,
        "endLine": 53,
        "endChar": 10
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_2d8f853f",
        "filename": "vpx_dsp/blend_vmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T15:47:10Z",
      "side": 1,
      "message": "it\u0027s ok to have a non-const alias for writing.\n const\u0027ing the \u0027src\u0027 parameter is a protection against code trying to mistakenly write to *src instead of *dst.",
      "parentUuid": "9a2e9c8f_0b7b9da4",
      "range": {
        "startLine": 53,
        "startChar": 2,
        "endLine": 53,
        "endChar": 10
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a2e9c8f_0b4ddd7c",
        "filename": "vpx_dsp/blend_vmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1137274
      },
      "writtenOn": "2016-07-08T15:58:05Z",
      "side": 1,
      "message": "\u003e const\u0027ing the \u0027src\u0027 parameter is a protection against code trying to mistakenly write to *src instead of *dst.\nYes, I know that.\n\nI was worried about this:\nhttp://www.compileroptimizations.com/category/alias_optimization_const_qualifier.htm\n\nBut if you can take the note at the bottom of that website at face value, then it should be ok.\n\nLet\u0027s leave this for now and I will submit a patch which changes all prototypes and related uses to const there are enough to cases to warrant a separate change.",
      "parentUuid": "5a142433_2d8f853f",
      "range": {
        "startLine": 53,
        "startChar": 2,
        "endLine": 53,
        "endChar": 10
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_c88a3782",
        "filename": "vpx_dsp/blend_vmask6.c",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T19:40:56Z",
      "side": 1,
      "message": "i see this as an API problem then: if dst and src can be alias, then the function\u0027s API should be explicit about that and only take 1 param (instead of *dst and const* src).\n\na later patch for fixing this is ok, thanks",
      "parentUuid": "9a2e9c8f_0b4ddd7c",
      "range": {
        "startLine": 53,
        "startChar": 2,
        "endLine": 53,
        "endChar": 10
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a142433_a2cf2489",
        "filename": "vpx_dsp/vpx_dsp_rtcd_defs.pl",
        "patchSetId": 3
      },
      "lineNbr": 966,
      "author": {
        "id": 1000898
      },
      "writtenOn": "2016-07-08T14:44:41Z",
      "side": 1,
      "message": "signatures should be \u0027const uint8_t* src...\u0027 for sources.",
      "range": {
        "startLine": 966,
        "startChar": 39,
        "endLine": 966,
        "endChar": 46
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a2e9c8f_eb7f318d",
        "filename": "vpx_dsp/vpx_dsp_rtcd_defs.pl",
        "patchSetId": 3
      },
      "lineNbr": 966,
      "author": {
        "id": 1137274
      },
      "writtenOn": "2016-07-08T15:10:34Z",
      "side": 1,
      "message": "see other comment",
      "parentUuid": "5a142433_a2cf2489",
      "range": {
        "startLine": 966,
        "startChar": 39,
        "endLine": 966,
        "endChar": 46
      },
      "revId": "2f04c85669b244304c940efc22e161392d37c14d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}
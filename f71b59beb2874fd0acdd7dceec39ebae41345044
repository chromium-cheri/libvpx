{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "fe355097_cc19ff5d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1001565
      },
      "writtenOn": "2022-09-18T01:49:20Z",
      "side": 1,
      "message": "This gives some small gains on mac M1, but would require duplicating the iscan arrays (3x 4x4, 8x8, 16x16 and 1x 32x32 \u003d 48 + 192 + 768 + 1024 \u003d 2032 extra elements) because they are used elsewhere (hence the integer sanitizer warnings)\n\nI don\u0027t have an x86 to test and my numbers are not consistent under the emulation on the M1. Do you two think it\u0027s worth the extra space for this? I\u0027d also like to make the C use iscan instead of scan and then remove the extra parameter, but that\u0027s orthogonal.\n\nbefore\n[ RUN      ] NEON/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 78233 \t simd_time \u003d 26947 \t Gain \u003d 2.903217 \n       Full calculations       4x4  c_time \u003d 160133 \t simd_time \u003d 26946 \t Gain \u003d 5.942737 \n     Bypass calculations       8x8  c_time \u003d 233359 \t simd_time \u003d 78328 \t Gain \u003d 2.979254 \n       Full calculations       8x8  c_time \u003d 541053 \t simd_time \u003d 78433 \t Gain \u003d 6.898283 \n     Bypass calculations     16x16  c_time \u003d 930735 \t simd_time \u003d 286932 \t Gain \u003d 3.243748 \n       Full calculations     16x16  c_time \u003d 2250873 \t simd_time \u003d 286537 \t Gain \u003d 7.855436 \n\nafter\n[ RUN      ] NEON/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 78160 \t simd_time \u003d 26780 \t Gain \u003d 2.918596 \n       Full calculations       4x4  c_time \u003d 160166 \t simd_time \u003d 26745 \t Gain \u003d 5.988633 \n     Bypass calculations       8x8  c_time \u003d 233554 \t simd_time \u003d 76251 \t Gain \u003d 3.062963 \n       Full calculations       8x8  c_time \u003d 540488 \t simd_time \u003d 75809 \t Gain \u003d 7.129602 \n     Bypass calculations     16x16  c_time \u003d 930836 \t simd_time \u003d 278593 \t Gain \u003d 3.341204 \n       Full calculations     16x16  c_time \u003d 2250925 \t simd_time \u003d 278623 \t Gain \u003d 8.078748 \n\nbefore\n[ RUN      ] SSE2/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 118233 \t simd_time \u003d 57802 \t Gain \u003d 2.045483 \n       Full calculations       4x4  c_time \u003d 204944 \t simd_time \u003d 57785 \t Gain \u003d 3.546664 \n     Bypass calculations       8x8  c_time \u003d 320385 \t simd_time \u003d 175800 \t Gain \u003d 1.822440 \n       Full calculations       8x8  c_time \u003d 626078 \t simd_time \u003d 176113 \t Gain \u003d 3.554979 \n     Bypass calculations     16x16  c_time \u003d 1209871 \t simd_time \u003d 665195 \t Gain \u003d 1.818822 \n       Full calculations     16x16  c_time \u003d 2651638 \t simd_time \u003d 664586 \t Gain \u003d 3.989909 \n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 118422 \t simd_time \u003d 66709 \t Gain \u003d 1.775203 \n       Full calculations       4x4  c_time \u003d 206819 \t simd_time \u003d 66677 \t Gain \u003d 3.101804 \n     Bypass calculations       8x8  c_time \u003d 319349 \t simd_time \u003d 187746 \t Gain \u003d 1.700963 \n       Full calculations       8x8  c_time \u003d 638847 \t simd_time \u003d 187674 \t Gain \u003d 3.404025 \n     Bypass calculations     16x16  c_time \u003d 1210723 \t simd_time \u003d 698745 \t Gain \u003d 1.732711 \n       Full calculations     16x16  c_time \u003d 2690340 \t simd_time \u003d 697067 \t Gain \u003d 3.859514 \n\nafter\n[ RUN      ] SSE2/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 118110 \t simd_time \u003d 58931 \t Gain \u003d 2.004208 \n       Full calculations       4x4  c_time \u003d 205792 \t simd_time \u003d 59122 \t Gain \u003d 3.480802 \n     Bypass calculations       8x8  c_time \u003d 319589 \t simd_time \u003d 174861 \t Gain \u003d 1.827675 \n       Full calculations       8x8  c_time \u003d 621338 \t simd_time \u003d 175486 \t Gain \u003d 3.540670 \n     Bypass calculations     16x16  c_time \u003d 1212799 \t simd_time \u003d 658211 \t Gain \u003d 1.842569 \n       Full calculations     16x16  c_time \u003d 2618738 \t simd_time \u003d 658861 \t Gain \u003d 3.974644 \n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 118146 \t simd_time \u003d 58740 \t Gain \u003d 2.011338 \n       Full calculations       4x4  c_time \u003d 204694 \t simd_time \u003d 58707 \t Gain \u003d 3.486705 \n     Bypass calculations       8x8  c_time \u003d 320205 \t simd_time \u003d 181227 \t Gain \u003d 1.766873 \n       Full calculations       8x8  c_time \u003d 621289 \t simd_time \u003d 180782 \t Gain \u003d 3.436675 \n     Bypass calculations     16x16  c_time \u003d 1208786 \t simd_time \u003d 686645 \t Gain \u003d 1.760424 \n       Full calculations     16x16  c_time \u003d 2628709 \t simd_time \u003d 697721 \t Gain \u003d 3.767565",
      "revId": "f71b59beb2874fd0acdd7dceec39ebae41345044",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "108dc594_965551e3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000882
      },
      "writtenOn": "2022-09-19T13:22:12Z",
      "side": 1,
      "message": "Elsewhere being the token decoder?\n\nThe avx2 test fails on eob mismatches.\n\nHere are the sse2/ssse3 numbers.\n\nbefore\n[ RUN      ] SSE2/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 142128 \t simd_time \u003d 48317 \t Gain \u003d 2.941573 \n       Full calculations       4x4  c_time \u003d 301341 \t simd_time \u003d 48306 \t Gain \u003d 6.238169 \n     Bypass calculations       8x8  c_time \u003d 397510 \t simd_time \u003d 113309 \t Gain \u003d 3.508194 \n       Full calculations       8x8  c_time \u003d 1001461 \t simd_time \u003d 113211 \t Gain \u003d 8.845969 \n     Bypass calculations     16x16  c_time \u003d 1491567 \t simd_time \u003d 352481 \t Gain \u003d 4.231624 \n       Full calculations     16x16  c_time \u003d 4091132 \t simd_time \u003d 352536 \t Gain \u003d 11.604863 \n[       OK ] SSE2/VP9QuantizeTest.DISABLED_Speed/0 (8453 ms)\n[ RUN      ] SSE2/VP9QuantizeTest.DISABLED_Speed/1\n     Bypass calculations       4x4  c_time \u003d 317596 \t simd_time \u003d 49508 \t Gain \u003d 6.415044 \n       Full calculations       4x4  c_time \u003d 309484 \t simd_time \u003d 49501 \t Gain \u003d 6.252076 \n     Bypass calculations       8x8  c_time \u003d 686459 \t simd_time \u003d 81892 \t Gain \u003d 8.382491 \n       Full calculations       8x8  c_time \u003d 686778 \t simd_time \u003d 81865 \t Gain \u003d 8.389153 \n     Bypass calculations     16x16  c_time \u003d 4457199 \t simd_time \u003d 348210 \t Gain \u003d 12.800319 \n       Full calculations     16x16  c_time \u003d 4415200 \t simd_time \u003d 348577 \t Gain \u003d 12.666355 \n[       OK ] SSE2/VP9QuantizeTest.DISABLED_Speed/1 (11832 ms)\n\n[----------] 8 tests from SSSE3/VP9QuantizeTest\n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 133085 \t simd_time \u003d 46345 \t Gain \u003d 2.871615 \n       Full calculations       4x4  c_time \u003d 301275 \t simd_time \u003d 46301 \t Gain \u003d 6.506879 \n     Bypass calculations       8x8  c_time \u003d 397327 \t simd_time \u003d 100151 \t Gain \u003d 3.967279 \n       Full calculations       8x8  c_time \u003d 1000902 \t simd_time \u003d 100232 \t Gain \u003d 9.985853 \n     Bypass calculations     16x16  c_time \u003d 1491447 \t simd_time \u003d 295722 \t Gain \u003d 5.043409 \n       Full calculations     16x16  c_time \u003d 4104882 \t simd_time \u003d 295693 \t Gain \u003d 13.882243 \n[       OK ] SSSE3/VP9QuantizeTest.DISABLED_Speed/0 (8313 ms)\n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/1\n     Bypass calculations     32x32  c_time \u003d 5103627 \t simd_time \u003d 637694 \t Gain \u003d 8.003254 \n       Full calculations     32x32  c_time \u003d 26602978 \t simd_time \u003d 2263553 \t Gain \u003d 11.752752 \n[       OK ] SSSE3/VP9QuantizeTest.DISABLED_Speed/1 (34607 ms)\n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/2\n     Bypass calculations       4x4  c_time \u003d 317139 \t simd_time \u003d 44006 \t Gain \u003d 7.206722 \n       Full calculations       4x4  c_time \u003d 309120 \t simd_time \u003d 44042 \t Gain \u003d 7.018755 \n     Bypass calculations       8x8  c_time \u003d 686061 \t simd_time \u003d 64229 \t Gain \u003d 10.681483 \n       Full calculations       8x8  c_time \u003d 685927 \t simd_time \u003d 64255 \t Gain \u003d 10.675076 \n     Bypass calculations     16x16  c_time \u003d 4447064 \t simd_time \u003d 260503 \t Gain \u003d 17.071066 \n       Full calculations     16x16  c_time \u003d 4397628 \t simd_time \u003d 260671 \t Gain \u003d 16.870415 \n[       OK ] SSSE3/VP9QuantizeTest.DISABLED_Speed/2 (11580 ms)\n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/3\n     Bypass calculations     32x32  c_time \u003d 6540976 \t simd_time \u003d 492660 \t Gain \u003d 13.276856 \n       Full calculations     32x32  c_time \u003d 19476069 \t simd_time \u003d 1341099 \t Gain \u003d 14.522469 \n[       OK ] SSSE3/VP9QuantizeTest.DISABLED_Speed/3 (27850 ms)\n\nafter\n[ RUN      ] SSE2/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 148927 \t simd_time \u003d 46697 \t Gain \u003d 3.189220 \n       Full calculations       4x4  c_time \u003d 301889 \t simd_time \u003d 46750 \t Gain \u003d 6.457519 \n     Bypass calculations       8x8  c_time \u003d 397607 \t simd_time \u003d 108208 \t Gain \u003d 3.674469 \n       Full calculations       8x8  c_time \u003d 1000216 \t simd_time \u003d 108190 \t Gain \u003d 9.244995 \n     Bypass calculations     16x16  c_time \u003d 1491397 \t simd_time \u003d 345163 \t Gain \u003d 4.320848 \n       Full calculations     16x16  c_time \u003d 4096945 \t simd_time \u003d 341260 \t Gain \u003d 12.005348 \n[       OK ] SSE2/VP9QuantizeTest.DISABLED_Speed/0 (8433 ms)\n[ RUN      ] SSE2/VP9QuantizeTest.DISABLED_Speed/1\n     Bypass calculations       4x4  c_time \u003d 316770 \t simd_time \u003d 47975 \t Gain \u003d 6.602814 \n       Full calculations       4x4  c_time \u003d 308425 \t simd_time \u003d 48089 \t Gain \u003d 6.413629 \n     Bypass calculations       8x8  c_time \u003d 686015 \t simd_time \u003d 80779 \t Gain \u003d 8.492492 \n       Full calculations       8x8  c_time \u003d 686265 \t simd_time \u003d 80685 \t Gain \u003d 8.505485 \n     Bypass calculations     16x16  c_time \u003d 4454955 \t simd_time \u003d 330604 \t Gain \u003d 13.475200 \n       Full calculations     16x16  c_time \u003d 4394163 \t simd_time \u003d 330610 \t Gain \u003d 13.291077 \n[       OK ] SSE2/VP9QuantizeTest.DISABLED_Speed/1 (11765 ms)\n\n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/0\n     Bypass calculations       4x4  c_time \u003d 132977 \t simd_time \u003d 43201 \t Gain \u003d 3.078100 \n       Full calculations       4x4  c_time \u003d 301657 \t simd_time \u003d 43161 \t Gain \u003d 6.989110 \n     Bypass calculations       8x8  c_time \u003d 397435 \t simd_time \u003d 95855 \t Gain \u003d 4.146210 \n       Full calculations       8x8  c_time \u003d 1001263 \t simd_time \u003d 95891 \t Gain \u003d 10.441679 \n     Bypass calculations     16x16  c_time \u003d 1492262 \t simd_time \u003d 281599 \t Gain \u003d 5.299245 \n       Full calculations     16x16  c_time \u003d 4094194 \t simd_time \u003d 281648 \t Gain \u003d 14.536563 \n[       OK ] SSSE3/VP9QuantizeTest.DISABLED_Speed/0 (8261 ms)\n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/1\n     Bypass calculations     32x32  c_time \u003d 5125878 \t simd_time \u003d 444884 \t Gain \u003d 11.521831 \n       Full calculations     32x32  c_time \u003d 26450209 \t simd_time \u003d 2154150 \t Gain \u003d 12.278722 \n[       OK ] SSSE3/VP9QuantizeTest.DISABLED_Speed/1 (34175 ms)\n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/2\n     Bypass calculations       4x4  c_time \u003d 317650 \t simd_time \u003d 43022 \t Gain \u003d 7.383432 \n       Full calculations       4x4  c_time \u003d 309231 \t simd_time \u003d 43020 \t Gain \u003d 7.188076 \n     Bypass calculations       8x8  c_time \u003d 686144 \t simd_time \u003d 63407 \t Gain \u003d 10.821266 \n       Full calculations       8x8  c_time \u003d 686320 \t simd_time \u003d 63430 \t Gain \u003d 10.820117 \n     Bypass calculations     16x16  c_time \u003d 4468771 \t simd_time \u003d 245271 \t Gain \u003d 18.219728 \n       Full calculations     16x16  c_time \u003d 4392225 \t simd_time \u003d 245228 \t Gain \u003d 17.910782 \n[       OK ] SSSE3/VP9QuantizeTest.DISABLED_Speed/2 (11563 ms)\n[ RUN      ] SSSE3/VP9QuantizeTest.DISABLED_Speed/3\n     Bypass calculations     32x32  c_time \u003d 6491645 \t simd_time \u003d 574173 \t Gain \u003d 11.306079 \n       Full calculations     32x32  c_time \u003d 19483132 \t simd_time \u003d 1309910 \t Gain \u003d 14.873642 \n[       OK ] SSSE3/VP9QuantizeTest.DISABLED_Speed/3 (27858 ms)",
      "parentUuid": "fe355097_cc19ff5d",
      "revId": "f71b59beb2874fd0acdd7dceec39ebae41345044",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cfa7f13e_36b8cb4f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1001565
      },
      "writtenOn": "2022-09-20T02:17:09Z",
      "side": 1,
      "message": "Hmm now that you mention it, I was incorrect about where I was looking. I\u0027m probably missing a quantize function somewhere.\n\nLooks like there is some improvement for SSE2/SSSE3. The mac M1 doesn\u0027t emulate AVX[2], will have to find another machine to diagnose that.\n\nIn the meantime, I uploaded a simpler patch which doesn\u0027t touch iscan. Maybe once I convert all of them that way I can re-try updating iscan.",
      "parentUuid": "108dc594_965551e3",
      "revId": "f71b59beb2874fd0acdd7dceec39ebae41345044",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2279dc1b_b02af0d2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1001565
      },
      "writtenOn": "2022-09-23T10:05:20Z",
      "side": 1,
      "message": "Thanks, the AVX had a bug and the AVX2 I hadn\u0027t updated at all for some reason. Fixed both, I think. Looks like that test doesn\u0027t even run until after the sanitizer is clean.\n\nFinally connected to a machine with avx[2] and fixed the code, probably.",
      "parentUuid": "cfa7f13e_36b8cb4f",
      "revId": "f71b59beb2874fd0acdd7dceec39ebae41345044",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}